{ pkgs, lib, buildGoModule }:
pkgs.stdenv.mkDerivation (with pkgs; rec {
  pname = "nph";
  version = "0.6.0";

  nativeBuildInputs = [ makeWrapper nim nimble git ];

  dontConfigure = true;

  buildPhase = ''
    nim c --debuginfo -o:nph --nimcache:/tmp src/nph 
  '';

  installPhase = ''
    runHook preInstall
    mkdir -p $out/bin
    cp nph $out/bin/
    chmod +x $out/bin/*
    runHook postInstall
  '';

  src = fetchFromGitHub {
    owner = "arnetheduck";
    repo = "nph";
    rev = "31bdced07d3dc3d254669bd94210101c701deeda";
    sha256 = "sha256-9t5VeGsxyytGdu7+Uv/J+x6bmeB5+eQapbyp30iPxqs=";
  };

})
